<html>
<head>
<title>Message Router Example</title>
<script src="./js/AgoraRtcEngine.js"></script>
<script language="JavaScript">

// Send a query to the browser process.
function sendMessage() {
  AgoraRtcEngine.initialize(new AgoraRtcEngine.RtcEngineContext('aab8b8f5a8cd4469a63042fcfafe7063'));
  AgoraRtcEngine.enableVideo();
  console.log('joinChannel', AgoraRtcEngine.joinChannel('', '123'));
  AgoraRtcEngine.on('Warning', function(...e) {
      console.warn('Warning', e);
  });
  AgoraRtcEngine.on('Error', function(...e) {
      console.error('Error', e);
  });
  AgoraRtcEngine.on('ApiCallExecuted', function(...e) {
      console.log('ApiCallExecuted', e);
  });
  AgoraRtcEngine.on('RtcStats', function(...e) {
      console.log('RtcStats', e);
  });
  AgoraRtcEngine.on('NetworkQuality', function(...e) {
      console.log('NetworkQuality', e);
  });
  console.log('enumeratePlaybackDevices', AgoraRtcEngine.audioDeviceManager.enumeratePlaybackDevices());
  console.log('enumerateRecordingDevices', AgoraRtcEngine.audioDeviceManager.enumerateRecordingDevices());
  console.log('enumerateVideoDevices', AgoraRtcEngine.videoDeviceManager.enumerateVideoDevices());
  
  // Results in a call to the OnQuery method in client_impl.cc.
  window.cefQuery({
    request: 'MessageRouterTest:' + document.getElementById("message").value,
    onSuccess: function(response) {
      document.getElementById('result').value = 'Response: '+response;
    },
    onFailure: function(error_code, error_message) {}
  });
}
</script>

</head>
<body bgcolor="white">
<form>
Message: <input type="text" id="message" value="My Message">
<br/><input type="button" onclick="sendMessage();" value="Send Message">
<br/>You should see the reverse of your message below:
<br/><textarea rows="10" cols="40" id="result"></textarea>
<canvas id="test" style="width: 200px; height: 200px;"></canvas>
</form>
</body>
</html>
